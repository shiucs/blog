---
title: windows10垃圾清理
reprint: false
date: 2021-07-28 20:45:56
categories:
  - Windows
tags:
  - 笔记
cover: /images/6b14b111c7fb902df40f66ae962618df.png
coverWidth:
coverHeight:
---

优化软件很多，比如`TuneUp Utilities`, 比如`Advanced SystemCare`, 比如`Glary Utilities` 。这些软件让你的系统垃圾被清理的很干净，很受小白们欢迎。

然而，作为一个喜欢倒腾电脑的玩家，或许最开始沉醉于这些乱七八糟的优化软件，但是慢慢地，发现有时候他们会删除掉不想删的文件，让系统变得不稳定，有类似经验的童鞋举手！

所以，我更趋向于让一切在自己的控制之下，手动清理系统垃圾。下面就是我装系统后的一系列操作，我不仅会告诉你如何操作，还会告诉你为什么这样操作：

1. 真正地关闭休眠
休眠文件 `hiberfil.sys` 是 XP 时代（或者更早）的产物，一直沿用至今，就是当系统暂时不用的时候，让它休眠，然后等用的时候可以快速唤醒。
但是，等到 `Vista` 时代，有了睡眠模式，虽然休眠和睡眠两个在运行机理上不同，但是对于用户来说功能基本是重复的，并且睡眠是不太占用系统资源的，而休眠文件 `hiberfil.sys` 往往至少要占 `1GB` 磁盘空间。所以很多用户就希望关掉它。
然而，想找到真正的关掉休眠的方法并不容易，直接删除休眠文件 `hiberfil.sys` 并没有效果，系统自带的磁盘清理也往往无法真正关掉它。那么究竟如何才能彻底关掉休眠功能，让休眠文件 `hiberfil.sys` 彻底消失呢？
这需要用到命令行，在你的开始菜单里，找到命令提示符，然后右键点击，以管理员身份运行（另一种方法是用 Win+R 打开运行，然后里面输入 `cmd`）：
![以管理员身份运行](/images/1c0696c655d202bf04788de9b4d462f3.png)
然后在里面输入`powercfg -h off` (如图)，回车，然后休眠就被关掉了，休眠文件 `hiberfil.sys` 就被彻底干掉了。
![输入powercfg -h off](/images/a6783bff972764ac7ccbf1fdf4693268.png)
当然，这个时候C盘空间并未看到减少，不要急，等清理磁盘后就干净了，具体操作后面会讲到。不过可以肯定的是，这一步已经彻底关掉了休眠功能。

2. 关闭虚拟内存
一般来说，博主这样干是为了备份系统盘的时候可以体积小一点。以4GB内存的电脑来讲，虚拟内存（分页文件）一般默认大概3-4GB，备份C盘你不会想让它们占你移动硬盘的空间吧？建议备份C盘时只保留400MB，然后备份完系统后再恢复到4096MB（对于4GB内存来说，8GB用4096MB也没问题，2GB建议用2096MB），这些原因后面讲。操作方式如下：
右键点击“此电脑”，选择“属性”
![属性](/images/2fa79f294aae30809bc6ba07e6f8dee9.png)
接下来的页面按照图示走，`高级系统设置>性能-设置>高级>更改>自定义大小`为400MB，然后点击”设置”，再点击“确定”，等你看到“要使改动生效，需要重新启动计算机”，那就说明你设置成功了，如果看不到这一句，说明你没按步骤走，一般是没有点击最后那个“确定”。
![设置](/images/39a5ec5caee23ad1180c6f9fd309d522.png)
好了，到这里就设置成功了，这里再来解释一下为什么要设置成 400MB，原因是，如果你选择了”无分页文件“，虚拟内存成了0，等到系统报错的时候文件无法转储，那个时候你会面对烦恼的弹出框，设置成 400MB 可以避免这一问题。
为什么不让系统自动管理分页文件大小呢？因为它会一会儿大一会儿小，分页文件可能会被其他文件隔离成碎片，而设置成固定大小的话（即初始大小和最大值设置成一个），分页文件会老老实实呆在磁盘的同一个地方，不会变动大小和位置。
为什么备份好系统后建议恢复到4096MB，因为400MB的话有时候你程序运行多了会出现内存不够的提示，即便8GB内存有时候也会碰到这种情况，所以一般设置成4096MB足够用了（如果你是2GB内存，设置为2096MB好了）。

3. 安全删除系统更新文件
系统会越来越臃肿，这是无可置疑的，C盘的臃肿很大一部分来自于系统更新后的安装文件，也就是说，更新安装成功之后，那些更新文件安装包是可以删除而不对系统造成负面影响的，那么这些文件在哪里呢？
它们在`C:\Windows\SoftwareDistribution\Download`，这个文件夹下的所有文件都是系统更新时下载下来的，等你系统更新完毕之后全部删除即可，遇到提示需要管理员权限才能删除时点击“继续”，直到清理干净。
![安全删除系统更新文件](/images/236b39265154a4798984c13c4fd8a2ec.png)
这样清理安全吗？不要怀疑，博主这样干好几年了。

4. 删除C盘根目录下多余文件夹，只保留下面5个（其中`ProgramData`是隐藏文件夹）就可以
![删除C盘根目录下多余文件夹](/images/2037e47f5650e965f35b4976e8146880.png)

5. 关闭系统备份还原
还是右键此电脑，选择属性。
接下来的页面按照图示走，`高级系统设置>系统保护>配置>禁用系统保护>确定`。
![关闭系统备份还原](/images/df67f322f9328029afe30443a7d04024.png)

6. 最后，让我们来彻底清空一下上面清理出来的垃圾吧
首先清空回收站，这个大家都会。
再说一个多数人都不会的。调用“运行”（快捷键Win+R） ，先输入`cleanmgr /sageset:99`，在里面选择所有的项目。然后再次运行，输入`cleanmgr /SAGERUN:99`，这样，之前清理出来的垃圾就彻底光光了。

#### 结果

世界清静了！让我们看看删除垃圾以前和以后的C盘变化吧，从 102GB 可用，到 112GB 可用，整整腾出来 10GB 空间。

![结果](/images/d4c048d8694633505093683e1c1df2bf.png)
